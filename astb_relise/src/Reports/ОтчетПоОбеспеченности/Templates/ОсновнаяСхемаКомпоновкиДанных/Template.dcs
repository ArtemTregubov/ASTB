<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных2</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаВыдачи</dataPath>
			<field>ДатаВыдачи</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Сотрудник</dataPath>
			<field>Сотрудник</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НормаВыдачи</dataPath>
			<field>НормаВыдачи</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ХарактеристикаНоменклатуры</dataPath>
			<field>ХарактеристикаНоменклатуры</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаПотребности</dataPath>
			<field>ДатаПотребности</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НоменклатураНормы</dataPath>
			<field>НоменклатураНормы</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ХарактеристикаФ</dataPath>
			<field>ХарактеристикаФ</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Характеристика Ф</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ХарактеристикаП</dataPath>
			<field>ХарактеристикаП</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Характеристика П</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Совпадает</dataPath>
			<field>Совпадает</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Совпадает</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НоменклатураФ</dataPath>
			<field>НоменклатураФ</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Номенклатура Ф</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПроцентИзноса</dataPath>
			<field>ПроцентИзноса</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Выдано</dataPath>
			<field>Выдано</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Выдано</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодМесяц</dataPath>
			<field>ПериодМесяц</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ДФ='MMMM yyyy'</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Должность</dataPath>
			<field>Должность</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>МВЗ</dataPath>
			<field>МВЗ</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>МВЗ</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Потребность</dataPath>
			<field>Потребность</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Потребность</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ПотребностьВыдачиСИЗ.Организация КАК Организация,
	ЕСТЬNULL(ОсновноеМестоРаботыСотрудникаСрезПоследних.Подразделение, ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)) КАК Подразделение,
	ЕСТЬNULL(ОсновноеМестоРаботыСотрудникаСрезПоследних.Должность, ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)) КАК Должность,
	ЕСТЬNULL(ОсновноеМестоРаботыСотрудникаСрезПоследних.РабочееМесто, ЗНАЧЕНИЕ(Справочник.РабочиеМеста.ПустаяСсылка)) КАК РабочееМесто,
	ПотребностьВыдачиСИЗ.Сотрудник КАК Сотрудник,
	ПотребностьВыдачиСИЗ.НормаВыдачи КАК НормаВыдачи,
	ПотребностьВыдачиСИЗ.НоменклатураНормы КАК НоменклатураНормы,
	ПотребностьВыдачиСИЗ.КоличествоОстаток КАК КоличествоОстаток,
	ПотребностьВыдачиСИЗ.Сотрудник.ФизическоеЛицо.Пол КАК Пол,
	НАЧАЛОПЕРИОДА(ПотребностьВыдачиСИЗ.ДатаПотребности, МЕСЯЦ) КАК ПериодМесяц
ПОМЕСТИТЬ Вт
ИЗ
	РегистрНакопления.ПотребностьВыдачиСИЗ.Остатки(
			&amp;НаДату,
			ДатаПотребности МЕЖДУ &amp;НаДату И &amp;ДатаК
				И Организация = &amp;Организация
				И (НоменклатураНормы = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))) КАК ПотребностьВыдачиСИЗ
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновноеМестоРаботыСотрудника.СрезПоследних(
				,
				Организация = &amp;Организация
					И (Подразделение В (&amp;Подразделение)
						ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))) КАК ОсновноеМестоРаботыСотрудникаСрезПоследних
		ПО ПотребностьВыдачиСИЗ.Сотрудник = ОсновноеМестоРаботыСотрудникаСрезПоследних.Сотрудник
			И (ОсновноеМестоРаботыСотрудникаСрезПоследних.ОсновноеМестоРаботы = ИСТИНА)

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ПотребностьВыдачиСИЗОбороты.Организация,
	ЕСТЬNULL(ОсновноеМестоРаботыСотрудникаСрезПоследних.Подразделение, ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)),
	ЕСТЬNULL(ОсновноеМестоРаботыСотрудникаСрезПоследних.Должность, ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)),
	ЕСТЬNULL(ОсновноеМестоРаботыСотрудникаСрезПоследних.РабочееМесто, ЗНАЧЕНИЕ(Справочник.РабочиеМеста.ПустаяСсылка)),
	ПотребностьВыдачиСИЗОбороты.Сотрудник,
	ПотребностьВыдачиСИЗОбороты.НормаВыдачи,
	ПотребностьВыдачиСИЗОбороты.НоменклатураНормы,
	ПотребностьВыдачиСИЗОбороты.КоличествоПриход,
	ПотребностьВыдачиСИЗОбороты.Сотрудник.ФизическоеЛицо.Пол,
	НАЧАЛОПЕРИОДА(ПотребностьВыдачиСИЗОбороты.ДатаПотребности, МЕСЯЦ)
ИЗ
	РегистрНакопления.ПотребностьВыдачиСИЗ.Обороты(
			&amp;НаДату,
			&amp;ДатаК,
			,
			ДатаПотребности МЕЖДУ &amp;НаДату И &amp;ДатаК
				И Организация = &amp;Организация
				И (НоменклатураНормы = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))) КАК ПотребностьВыдачиСИЗОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновноеМестоРаботыСотрудника.СрезПоследних(
				,
				Организация = &amp;Организация
					И (Подразделение В (&amp;Подразделение)
						ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))) КАК ОсновноеМестоРаботыСотрудникаСрезПоследних
		ПО ПотребностьВыдачиСИЗОбороты.Сотрудник = ОсновноеМестоРаботыСотрудникаСрезПоследних.Сотрудник
			И (ОсновноеМестоРаботыСотрудникаСрезПоследних.ОсновноеМестоРаботы = ИСТИНА)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Организация КАК Организация,
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Сотрудник КАК Сотрудник,
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Подразделение КАК Подразделение,
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Должность КАК Должность
ПОМЕСТИТЬ ВТ_ОсновноеМестоРаботыСотрудника
ИЗ
	РегистрСведений.ОсновноеМестоРаботыСотрудника.СрезПоследних(, Организация = &amp;Организация) КАК ОсновноеМестоРаботыСотрудникаСрезПоследних
ГДЕ
	ОсновноеМестоРаботыСотрудникаСрезПоследних.ОсновноеМестоРаботы
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Вт.Организация КАК Организация,
	Вт.Подразделение КАК Подразделение,
	Вт.Должность КАК Должность,
	Вт.РабочееМесто КАК РабочееМесто,
	Вт.Сотрудник КАК Сотрудник,
	Вт.НормаВыдачи КАК НормаВыдачи,
	Вт.НоменклатураНормы КАК НоменклатураНормы,
	Вт.КоличествоОстаток КАК КоличествоОстаток,
	Вт.Пол КАК Пол,
	Вт.ПериодМесяц КАК ПериодМесяц
ПОМЕСТИТЬ ТаблицаПерсональнойПотребности
ИЗ
	Вт КАК Вт
ГДЕ
	НЕ Вт.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)

СГРУППИРОВАТЬ ПО
	Вт.ПериодМесяц,
	Вт.НормаВыдачи,
	Вт.Организация,
	Вт.Подразделение,
	Вт.Сотрудник,
	Вт.НоменклатураНормы,
	Вт.Должность,
	Вт.Пол,
	Вт.РабочееМесто,
	Вт.КоличествоОстаток
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник КАК _Сотрудник,
	СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение КАК _Подразделение,
	СоответствияНоменклатурыВыдачиСрезПоследних.Должность КАК _Должность,
	СоответствияНоменклатурыВыдачиСрезПоследних.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура КАК Номенклатура,
	СоответствияНоменклатурыВыдачиСрезПоследних.Приоритет КАК Приоритет,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура.Пол КАК Пол
ПОМЕСТИТЬ ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность
ИЗ
	РегистрСведений.СоответствияНоменклатурыВыдачи.СрезПоследних(
			,
			НоменклатураНормыОрганизации.Владелец = &amp;Организация
				И (НоменклатураНормыОрганизации = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))
				И (Подразделение В (&amp;Подразделение)
					ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))
				И (Номенклатура = &amp;Номенклатура
					ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПУстаяСсылка))) КАК СоответствияНоменклатурыВыдачиСрезПоследних
ГДЕ
	НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник = ЗНАЧЕНИЕ(Справочник.Сотрудники.ПустаяСсылка)
	И НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
	И НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Должность = ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос._Сотрудник КАК _Сотрудник,
	ВложенныйЗапрос._Подразделение КАК _Подразделение,
	ВложенныйЗапрос._Должность КАК _Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Номенклатура КАК Номенклатура,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Пол КАК Пол,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Приоритет КАК Приоритет
ПОМЕСТИТЬ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность
ИЗ
	(ВЫБРАТЬ
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность._Сотрудник КАК _Сотрудник,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность._Подразделение КАК _Подразделение,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность._Должность КАК _Должность,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
		МИНИМУМ(ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Приоритет) КАК Приоритет,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Пол КАК Пол
	ИЗ
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность КАК ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность
	
	СГРУППИРОВАТЬ ПО
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность._Сотрудник,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность._Подразделение,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность._Должность,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.НоменклатураНормыОрганизации,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Пол) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность КАК ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность
		ПО ВложенныйЗапрос._Сотрудник = ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность._Сотрудник
			И ВложенныйЗапрос._Подразделение = ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность._Подразделение
			И ВложенныйЗапрос._Должность = ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность._Должность
			И ВложенныйЗапрос.НоменклатураНормыОрганизации = ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.НоменклатураНормыОрганизации
			И ВложенныйЗапрос.Приоритет = ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Приоритет
			И ВложенныйЗапрос.Пол = ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Пол

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос._Сотрудник,
	ВложенныйЗапрос._Подразделение,
	ВложенныйЗапрос._Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Пол,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Приоритет,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ВТ_ВесьМаппинг_Сотрудник_Подразделение_Должность
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник КАК _Сотрудник,
	СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение КАК _Подразделение,
	СоответствияНоменклатурыВыдачиСрезПоследних.Должность КАК _Должность,
	СоответствияНоменклатурыВыдачиСрезПоследних.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура КАК Номенклатура,
	СоответствияНоменклатурыВыдачиСрезПоследних.Приоритет КАК Приоритет,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура.Пол КАК Пол
ПОМЕСТИТЬ ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность
ИЗ
	РегистрСведений.СоответствияНоменклатурыВыдачи.СрезПоследних(
			,
			НоменклатураНормыОрганизации.Владелец = &amp;Организация
				И (НоменклатураНормыОрганизации = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))
				И (Подразделение В (&amp;Подразделение)
					ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))
				И (Номенклатура = &amp;Номенклатура
					ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПУстаяСсылка))) КАК СоответствияНоменклатурыВыдачиСрезПоследних
ГДЕ
	НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник = ЗНАЧЕНИЕ(Справочник.Сотрудники.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
	И НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Должность = ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос._Сотрудник КАК _Сотрудник,
	ВложенныйЗапрос._Подразделение КАК _Подразделение,
	ВложенныйЗапрос._Должность КАК _Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Номенклатура КАК Номенклатура,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Пол КАК Пол,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Приоритет КАК Приоритет
ПОМЕСТИТЬ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность
ИЗ
	(ВЫБРАТЬ
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность._Сотрудник КАК _Сотрудник,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность._Подразделение КАК _Подразделение,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность._Должность КАК _Должность,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
		МИНИМУМ(ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Приоритет) КАК Приоритет,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Пол КАК Пол
	ИЗ
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность КАК ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность
	
	СГРУППИРОВАТЬ ПО
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность._Сотрудник,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность._Подразделение,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность._Должность,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Пол) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность КАК ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность
		ПО ВложенныйЗапрос._Сотрудник = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность._Сотрудник
			И ВложенныйЗапрос._Подразделение = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность._Подразделение
			И ВложенныйЗапрос._Должность = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность._Должность
			И ВложенныйЗапрос.НоменклатураНормыОрганизации = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации
			И ВложенныйЗапрос.Приоритет = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Приоритет
			И ВложенныйЗапрос.Пол = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Пол

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос._Сотрудник,
	ВложенныйЗапрос._Подразделение,
	ВложенныйЗапрос._Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Пол,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Приоритет,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_Должность
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник КАК _Сотрудник,
	СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение КАК _Подразделение,
	СоответствияНоменклатурыВыдачиСрезПоследних.Должность КАК _Должность,
	СоответствияНоменклатурыВыдачиСрезПоследних.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура КАК Номенклатура,
	СоответствияНоменклатурыВыдачиСрезПоследних.Приоритет КАК Приоритет,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура.Пол КАК Пол
ПОМЕСТИТЬ ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность
ИЗ
	РегистрСведений.СоответствияНоменклатурыВыдачи.СрезПоследних(
			,
			НоменклатураНормыОрганизации.Владелец = &amp;Организация
				И (НоменклатураНормыОрганизации = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))
				И (Подразделение В (&amp;Подразделение)
					ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))
				И (Номенклатура = &amp;Номенклатура
					ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПУстаяСсылка))) КАК СоответствияНоменклатурыВыдачиСрезПоследних
ГДЕ
	НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник = ЗНАЧЕНИЕ(Справочник.Сотрудники.ПустаяСсылка)
	И НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Должность = ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос._Сотрудник КАК _Сотрудник,
	ВложенныйЗапрос._Подразделение КАК _Подразделение,
	ВложенныйЗапрос._Должность КАК _Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Номенклатура КАК Номенклатура,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Пол КАК Пол,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Приоритет КАК Приоритет
ПОМЕСТИТЬ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность
ИЗ
	(ВЫБРАТЬ
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Сотрудник КАК _Сотрудник,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Подразделение КАК _Подразделение,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Должность КАК _Должность,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
		МИНИМУМ(ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Приоритет) КАК Приоритет,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Пол КАК Пол
	ИЗ
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность КАК ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность
	
	СГРУППИРОВАТЬ ПО
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Сотрудник,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Подразделение,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Должность,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации,
		ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Пол) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность КАК ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность
		ПО ВложенныйЗапрос._Сотрудник = ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Сотрудник
			И ВложенныйЗапрос._Подразделение = ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Подразделение
			И ВложенныйЗапрос._Должность = ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Должность
			И ВложенныйЗапрос.НоменклатураНормыОрганизации = ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации
			И ВложенныйЗапрос.Приоритет = ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Приоритет
			И ВложенныйЗапрос.Пол = ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Пол

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос._Сотрудник,
	ВложенныйЗапрос._Подразделение,
	ВложенныйЗапрос._Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Пол,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Номенклатура,
	ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Приоритет
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ВТ_ВесьМаппинг_Сотрудник_Подразделение_ПустаяДолжность
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник КАК _Сотрудник,
	СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение КАК _Подразделение,
	СоответствияНоменклатурыВыдачиСрезПоследних.Должность КАК _Должность,
	СоответствияНоменклатурыВыдачиСрезПоследних.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура КАК Номенклатура,
	СоответствияНоменклатурыВыдачиСрезПоследних.Приоритет КАК Приоритет,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура.Пол КАК Пол
ПОМЕСТИТЬ ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность
ИЗ
	РегистрСведений.СоответствияНоменклатурыВыдачи.СрезПоследних(
			,
			НоменклатураНормыОрганизации.Владелец = &amp;Организация
				И (НоменклатураНормыОрганизации = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))
				И (Подразделение В (&amp;Подразделение)
					ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))
				И (Номенклатура = &amp;Номенклатура
					ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПУстаяСсылка))) КАК СоответствияНоменклатурыВыдачиСрезПоследних
ГДЕ
	НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник = ЗНАЧЕНИЕ(Справочник.Сотрудники.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Должность = ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос._Сотрудник КАК _Сотрудник,
	ВложенныйЗапрос._Подразделение КАК _Подразделение,
	ВложенныйЗапрос._Должность КАК _Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура КАК Номенклатура,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Пол КАК Пол,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет КАК Приоритет
ПОМЕСТИТЬ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность
ИЗ
	(ВЫБРАТЬ
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Сотрудник КАК _Сотрудник,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Подразделение КАК _Подразделение,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Должность КАК _Должность,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
		МИНИМУМ(ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет) КАК Приоритет,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Пол КАК Пол
	ИЗ
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность КАК ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность
	
	СГРУППИРОВАТЬ ПО
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Сотрудник,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Подразделение,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Должность,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации,
		ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Пол) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность КАК ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность
		ПО ВложенныйЗапрос._Сотрудник = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Сотрудник
			И ВложенныйЗапрос._Подразделение = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Подразделение
			И ВложенныйЗапрос._Должность = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Должность
			И ВложенныйЗапрос.НоменклатураНормыОрганизации = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации
			И ВложенныйЗапрос.Приоритет = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
			И ВложенныйЗапрос.Пол = ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Пол

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос._Сотрудник,
	ВложенныйЗапрос._Подразделение,
	ВложенныйЗапрос._Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Пол,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура,
	ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ВТ_ВесьМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник КАК _Сотрудник,
	СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение КАК _Подразделение,
	СоответствияНоменклатурыВыдачиСрезПоследних.Должность КАК _Должность,
	СоответствияНоменклатурыВыдачиСрезПоследних.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура КАК Номенклатура,
	СоответствияНоменклатурыВыдачиСрезПоследних.Приоритет КАК Приоритет,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура.Пол КАК Пол
ПОМЕСТИТЬ ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность
ИЗ
	РегистрСведений.СоответствияНоменклатурыВыдачи.СрезПоследних(
			,
			НоменклатураНормыОрганизации.Владелец = &amp;Организация
				И (НоменклатураНормыОрганизации = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))
				И (Подразделение В (&amp;Подразделение)
					ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))
				И (Номенклатура = &amp;Номенклатура
					ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПУстаяСсылка))) КАК СоответствияНоменклатурыВыдачиСрезПоследних
ГДЕ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник = ЗНАЧЕНИЕ(Справочник.Сотрудники.ПустаяСсылка)
	И НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
	И НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Должность = ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос._Сотрудник КАК _Сотрудник,
	ВложенныйЗапрос._Подразделение КАК _Подразделение,
	ВложенныйЗапрос._Должность КАК _Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Номенклатура КАК Номенклатура,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Пол КАК Пол,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Приоритет КАК Приоритет
ПОМЕСТИТЬ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность
ИЗ
	(ВЫБРАТЬ
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность._Сотрудник КАК _Сотрудник,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность._Подразделение КАК _Подразделение,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность._Должность КАК _Должность,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
		МИНИМУМ(ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Приоритет) КАК Приоритет,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Пол КАК Пол
	ИЗ
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность КАК ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность
	
	СГРУППИРОВАТЬ ПО
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность._Сотрудник,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность._Подразделение,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность._Должность,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.НоменклатураНормыОрганизации,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Пол) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность КАК ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность
		ПО ВложенныйЗапрос._Сотрудник = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность._Сотрудник
			И ВложенныйЗапрос._Подразделение = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность._Подразделение
			И ВложенныйЗапрос._Должность = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность._Должность
			И ВложенныйЗапрос.НоменклатураНормыОрганизации = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.НоменклатураНормыОрганизации
			И ВложенныйЗапрос.Приоритет = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Приоритет
			И ВложенныйЗапрос.Пол = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Пол

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос._Сотрудник,
	ВложенныйЗапрос._Подразделение,
	ВложенныйЗапрос._Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Пол,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Номенклатура,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность.Приоритет
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_Должность
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник КАК _Сотрудник,
	СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение КАК _Подразделение,
	СоответствияНоменклатурыВыдачиСрезПоследних.Должность КАК _Должность,
	СоответствияНоменклатурыВыдачиСрезПоследних.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура КАК Номенклатура,
	СоответствияНоменклатурыВыдачиСрезПоследних.Приоритет КАК Приоритет,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура.Пол КАК Пол
ПОМЕСТИТЬ ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность
ИЗ
	РегистрСведений.СоответствияНоменклатурыВыдачи.СрезПоследних(
			,
			НоменклатураНормыОрганизации.Владелец = &amp;Организация
				И (НоменклатураНормыОрганизации = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))
				И (Подразделение В (&amp;Подразделение)
					ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))
				И (Номенклатура = &amp;Номенклатура
					ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПУстаяСсылка))) КАК СоответствияНоменклатурыВыдачиСрезПоследних
ГДЕ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник = ЗНАЧЕНИЕ(Справочник.Сотрудники.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
	И НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Должность = ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос._Сотрудник КАК _Сотрудник,
	ВложенныйЗапрос._Подразделение КАК _Подразделение,
	ВложенныйЗапрос._Должность КАК _Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Номенклатура КАК Номенклатура,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Пол КАК Пол,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Приоритет КАК Приоритет
ПОМЕСТИТЬ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность
ИЗ
	(ВЫБРАТЬ
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Сотрудник КАК _Сотрудник,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Подразделение КАК _Подразделение,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Должность КАК _Должность,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
		МИНИМУМ(ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Приоритет) КАК Приоритет,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Пол КАК Пол
	ИЗ
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность КАК ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность
	
	СГРУППИРОВАТЬ ПО
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Сотрудник,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Подразделение,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Должность,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Пол) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность КАК ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность
		ПО ВложенныйЗапрос._Сотрудник = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Сотрудник
			И ВложенныйЗапрос._Подразделение = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Подразделение
			И ВложенныйЗапрос._Должность = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Должность
			И ВложенныйЗапрос.НоменклатураНормыОрганизации = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации
			И ВложенныйЗапрос.Приоритет = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Приоритет
			И ВложенныйЗапрос.Пол = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Пол

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос._Сотрудник,
	ВложенныйЗапрос._Подразделение,
	ВложенныйЗапрос._Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Пол,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Номенклатура,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Приоритет
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник КАК _Сотрудник,
	СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение КАК _Подразделение,
	СоответствияНоменклатурыВыдачиСрезПоследних.Должность КАК _Должность,
	СоответствияНоменклатурыВыдачиСрезПоследних.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура КАК Номенклатура,
	СоответствияНоменклатурыВыдачиСрезПоследних.Приоритет КАК Приоритет,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура.Пол КАК Пол
ПОМЕСТИТЬ ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность
ИЗ
	РегистрСведений.СоответствияНоменклатурыВыдачи.СрезПоследних(
			,
			НоменклатураНормыОрганизации.Владелец = &amp;Организация
				И (НоменклатураНормыОрганизации = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))
				И (Подразделение В (&amp;Подразделение)
					ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))
				И (Номенклатура = &amp;Номенклатура
					ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПУстаяСсылка))) КАК СоответствияНоменклатурыВыдачиСрезПоследних
ГДЕ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник = ЗНАЧЕНИЕ(Справочник.Сотрудники.ПустаяСсылка)
	И НЕ СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Должность = ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос._Сотрудник КАК _Сотрудник,
	ВложенныйЗапрос._Подразделение КАК _Подразделение,
	ВложенныйЗапрос._Должность КАК _Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Номенклатура КАК Номенклатура,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Пол КАК Пол,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Приоритет КАК Приоритет
ПОМЕСТИТЬ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность
ИЗ
	(ВЫБРАТЬ
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Сотрудник КАК _Сотрудник,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Подразделение КАК _Подразделение,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Должность КАК _Должность,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
		МИНИМУМ(ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Приоритет) КАК Приоритет,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Пол КАК Пол
	ИЗ
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность КАК ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность
	
	СГРУППИРОВАТЬ ПО
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Сотрудник,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Подразделение,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Должность,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации,
		ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Пол) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность КАК ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность
		ПО ВложенныйЗапрос._Сотрудник = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Сотрудник
			И ВложенныйЗапрос._Подразделение = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Подразделение
			И ВложенныйЗапрос._Должность = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Должность
			И ВложенныйЗапрос.НоменклатураНормыОрганизации = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации
			И ВложенныйЗапрос.Приоритет = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Приоритет
			И ВложенныйЗапрос.Пол = ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Пол

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос._Сотрудник,
	ВложенныйЗапрос._Подразделение,
	ВложенныйЗапрос._Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Пол,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Номенклатура,
	ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Приоритет
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ВТ_ВесьМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник КАК _Сотрудник,
	СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение КАК _Подразделение,
	СоответствияНоменклатурыВыдачиСрезПоследних.Должность КАК _Должность,
	СоответствияНоменклатурыВыдачиСрезПоследних.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура КАК Номенклатура,
	СоответствияНоменклатурыВыдачиСрезПоследних.Приоритет КАК Приоритет,
	СоответствияНоменклатурыВыдачиСрезПоследних.Номенклатура.Пол КАК Пол
ПОМЕСТИТЬ ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность
ИЗ
	РегистрСведений.СоответствияНоменклатурыВыдачи.СрезПоследних(
			,
			НоменклатураНормыОрганизации.Владелец = &amp;Организация
				И (НоменклатураНормыОрганизации = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))
				И (Подразделение В (&amp;Подразделение)
					ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))
				И (Номенклатура = &amp;Номенклатура
					ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПУстаяСсылка))) КАК СоответствияНоменклатурыВыдачиСрезПоследних
ГДЕ
	СоответствияНоменклатурыВыдачиСрезПоследних.Сотрудник = ЗНАЧЕНИЕ(Справочник.Сотрудники.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Должность = ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)
	И СоответствияНоменклатурыВыдачиСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос._Сотрудник КАК _Сотрудник,
	ВложенныйЗапрос._Подразделение КАК _Подразделение,
	ВложенныйЗапрос._Должность КАК _Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура КАК Номенклатура,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Пол КАК Пол,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет КАК Приоритет
ПОМЕСТИТЬ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность
ИЗ
	(ВЫБРАТЬ
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность._Сотрудник КАК _Сотрудник,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность._Подразделение КАК _Подразделение,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность._Должность КАК _Должность,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации КАК НоменклатураНормыОрганизации,
		МИНИМУМ(ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет) КАК Приоритет,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Пол КАК Пол
	ИЗ
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность КАК ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность
	
	СГРУППИРОВАТЬ ПО
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность._Сотрудник,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность._Подразделение,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность._Должность,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации,
		ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Пол) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность КАК ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность
		ПО ВложенныйЗапрос._Сотрудник = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность._Сотрудник
			И ВложенныйЗапрос._Подразделение = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность._Подразделение
			И ВложенныйЗапрос._Должность = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность._Должность
			И ВложенныйЗапрос.НоменклатураНормыОрганизации = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации
			И ВложенныйЗапрос.Приоритет = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
			И ВложенныйЗапрос.Пол = ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Пол

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос._Сотрудник,
	ВложенныйЗапрос._Подразделение,
	ВложенныйЗапрос._Должность,
	ВложенныйЗапрос.НоменклатураНормыОрганизации,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Пол,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура,
	ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ВТ_ВесьМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗначенияАнтропометрическихСвойств.Сотрудник КАК Сотрудник,
	ЗначенияАнтропометрическихСвойств.ВидСвойства КАК ВидСвойства,
	ЗначенияАнтропометрическихСвойств.ЗначениеСвойства КАК ЗначениеСвойства
ПОМЕСТИТЬ ВТ_АнтропометрияСотрудников
ИЗ
	РегистрСведений.ЗначенияАнтропометрическихСвойств КАК ЗначенияАнтропометрическихСвойств
ГДЕ
	ЗначенияАнтропометрическихСвойств.ВидСвойства &lt;&gt; ЗНАЧЕНИЕ(Справочник.ВидыАнтропометрическихСвойств.Рост)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЗначенияАнтропометрическихСвойств.Сотрудник КАК Сотрудник,
	ЗначенияАнтропометрическихСвойств.ЗначениеСвойства КАК ЗначениеСвойства
ПОМЕСТИТЬ ВТ_Рост
ИЗ
	РегистрСведений.ЗначенияАнтропометрическихСвойств КАК ЗначенияАнтропометрическихСвойств
ГДЕ
	ЗначенияАнтропометрическихСвойств.ВидСвойства = ЗНАЧЕНИЕ(Справочник.ВидыАнтропометрическихСвойств.Рост)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос.Организация КАК Организация,
	ВложенныйЗапрос.Подразделение КАК Подразделение,
	ВложенныйЗапрос.Должность КАК Должность,
	ВложенныйЗапрос.РабочееМесто КАК РабочееМесто,
	ВложенныйЗапрос.Сотрудник КАК Сотрудник,
	ВложенныйЗапрос.НормаВыдачи КАК НормаВыдачи,
	ВложенныйЗапрос.НоменклатураНормы КАК НоменклатураНормы,
	ВложенныйЗапрос.ВидАнтропометрии КАК ВидАнтропометрии,
	ВложенныйЗапрос.ЗначениеАнтропометрии КАК ЗначениеАнтропометрии,
	ВложенныйЗапрос1.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.План КАК План,
	ВложенныйЗапрос.Рост КАК Рост,
	ВложенныйЗапрос.ПериодМесяц КАК ПериодМесяц
ПОМЕСТИТЬ ВТ_Результат
ИЗ
	(ВЫБРАТЬ
		ТаблицаПерсональнойПотребности.Организация КАК Организация,
		ТаблицаПерсональнойПотребности.Подразделение КАК Подразделение,
		ТаблицаПерсональнойПотребности.Должность КАК Должность,
		ТаблицаПерсональнойПотребности.РабочееМесто КАК РабочееМесто,
		ТаблицаПерсональнойПотребности.Сотрудник КАК Сотрудник,
		ТаблицаПерсональнойПотребности.НормаВыдачи КАК НормаВыдачи,
		ТаблицаПерсональнойПотребности.НоменклатураНормы КАК НоменклатураНормы,
		ВЫБОР
			КОГДА ВТ_АнтропометрияСотрудников.ВидСвойства ЕСТЬ NULL
				ТОГДА ТаблицаПерсональнойПотребности.НоменклатураНормы.ВидАнтропометрическогоСвойства
			ИНАЧЕ ВТ_АнтропометрияСотрудников.ВидСвойства
		КОНЕЦ КАК ВидАнтропометрии,
		ЕСТЬNULL(ВТ_АнтропометрияСотрудников.ЗначениеСвойства, "") КАК ЗначениеАнтропометрии,
		ВТ_Рост.ЗначениеСвойства КАК Рост,
		ТаблицаПерсональнойПотребности.КоличествоОстаток КАК План,
		МИНИМУМ(ВЫБОР
				КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
					ТОГДА ВЫБОР
							КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
								ТОГДА ВЫБОР
										КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
											ТОГДА ВЫБОР
													КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
														ТОГДА ВЫБОР
																КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
																	ТОГДА ВЫБОР
																			КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
																				ТОГДА ВЫБОР
																						КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																							ТОГДА ВЫБОР
																									КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																										ТОГДА 0
																									ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
																								КОНЕЦ
																						ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Приоритет
																					КОНЕЦ
																			ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Приоритет
																		КОНЕЦ
																ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Приоритет
															КОНЕЦ
													ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
												КОНЕЦ
										ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Приоритет
									КОНЕЦ
							ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Приоритет
						КОНЕЦ
				ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Приоритет
			КОНЕЦ) КАК Приоритет,
		ТаблицаПерсональнойПотребности.ПериодМесяц КАК ПериодМесяц
	ИЗ
		ТаблицаПерсональнойПотребности КАК ТаблицаПерсональнойПотребности
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_АнтропометрияСотрудников КАК ВТ_АнтропометрияСотрудников
			ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_АнтропометрияСотрудников.Сотрудник
				И ТаблицаПерсональнойПотребности.НоменклатураНормы.ВидАнтропометрическогоСвойства = ВТ_АнтропометрияСотрудников.ВидСвойства
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность КАК ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность
			ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность._Сотрудник
				И ТаблицаПерсональнойПотребности.Подразделение = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность._Подразделение
				И ТаблицаПерсональнойПотребности.Должность = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность._Должность
				И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.НоменклатураНормыОрганизации
				И (ВЫБОР
					КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
						ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Пол
					ИНАЧЕ ИСТИНА
				КОНЕЦ)
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность КАК ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность
			ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность._Сотрудник
				И ТаблицаПерсональнойПотребности.Должность = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность._Должность
				И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации
				И (ВЫБОР
					КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
						ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Пол
					ИНАЧЕ ИСТИНА
				КОНЕЦ)
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность КАК ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность
			ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Сотрудник
				И ТаблицаПерсональнойПотребности.Подразделение = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Подразделение
				И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации
				И (ВЫБОР
					КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
						ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Пол
					ИНАЧЕ ИСТИНА
				КОНЕЦ)
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность КАК ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность
			ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Сотрудник
				И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации
				И (ВЫБОР
					КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
						ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Пол
					ИНАЧЕ ИСТИНА
				КОНЕЦ)
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность КАК ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность
			ПО ТаблицаПерсональнойПотребности.Подразделение = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность._Подразделение
				И ТаблицаПерсональнойПотребности.Должность = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность._Должность
				И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.НоменклатураНормыОрганизации
				И (ВЫБОР
					КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
						ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Пол
					ИНАЧЕ ИСТИНА
				КОНЕЦ)
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность КАК ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность
			ПО ТаблицаПерсональнойПотребности.Должность = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Должность
				И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации
				И (ВЫБОР
					КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
						ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Пол
					ИНАЧЕ ИСТИНА
				КОНЕЦ)
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность КАК ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность
			ПО ТаблицаПерсональнойПотребности.Подразделение = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Подразделение
				И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации
				И (ВЫБОР
					КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
						ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Пол
					ИНАЧЕ ИСТИНА
				КОНЕЦ)
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность КАК ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность
			ПО ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации
				И (ВЫБОР
					КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
						ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Пол
					ИНАЧЕ ИСТИНА
				КОНЕЦ)
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Рост КАК ВТ_Рост
			ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_Рост.Сотрудник
	ГДЕ
		(ТаблицаПерсональнойПотребности.Подразделение В (&amp;Подразделение)
				ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка))
	
	СГРУППИРОВАТЬ ПО
		ТаблицаПерсональнойПотребности.Организация,
		ТаблицаПерсональнойПотребности.Подразделение,
		ТаблицаПерсональнойПотребности.Сотрудник,
		ТаблицаПерсональнойПотребности.КоличествоОстаток,
		ТаблицаПерсональнойПотребности.НормаВыдачи,
		ТаблицаПерсональнойПотребности.НоменклатураНормы,
		ВЫБОР
			КОГДА ВТ_АнтропометрияСотрудников.ВидСвойства ЕСТЬ NULL
				ТОГДА ТаблицаПерсональнойПотребности.НоменклатураНормы.ВидАнтропометрическогоСвойства
			ИНАЧЕ ВТ_АнтропометрияСотрудников.ВидСвойства
		КОНЕЦ,
		ТаблицаПерсональнойПотребности.Должность,
		ТаблицаПерсональнойПотребности.РабочееМесто,
		ТаблицаПерсональнойПотребности.ПериодМесяц,
		ЕСТЬNULL(ВТ_АнтропометрияСотрудников.ЗначениеСвойства, ""),
		ВТ_Рост.ЗначениеСвойства) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ТаблицаПерсональнойПотребности.Организация КАК Организация,
			ТаблицаПерсональнойПотребности.Подразделение КАК Подразделение,
			ТаблицаПерсональнойПотребности.Должность КАК Должность,
			ТаблицаПерсональнойПотребности.РабочееМесто КАК РабочееМесто,
			ТаблицаПерсональнойПотребности.Сотрудник КАК Сотрудник,
			ТаблицаПерсональнойПотребности.НормаВыдачи КАК НормаВыдачи,
			ТаблицаПерсональнойПотребности.НоменклатураНормы КАК НоменклатураНормы,
			ВЫБОР
				КОГДА ВТ_АнтропометрияСотрудников.ВидСвойства ЕСТЬ NULL
					ТОГДА ТаблицаПерсональнойПотребности.НоменклатураНормы.ВидАнтропометрическогоСвойства
				ИНАЧЕ ВТ_АнтропометрияСотрудников.ВидСвойства
			КОНЕЦ КАК ВидАнтропометрии,
			ЕСТЬNULL(ВТ_АнтропометрияСотрудников.ЗначениеСвойства, "") КАК ЗначениеАнтропометрии,
			ВЫБОР
				КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
					ТОГДА ВЫБОР
							КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
								ТОГДА ВЫБОР
										КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
											ТОГДА ВЫБОР
													КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
														ТОГДА ВЫБОР
																КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
																	ТОГДА ВЫБОР
																			КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
																				ТОГДА ВЫБОР
																						КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																							ТОГДА ВЫБОР
																									КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																										ТОГДА ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
																									ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура
																								КОНЕЦ
																						ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Номенклатура
																					КОНЕЦ
																			ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Номенклатура
																		КОНЕЦ
																ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Номенклатура
															КОНЕЦ
													ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура
												КОНЕЦ
										ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Номенклатура
									КОНЕЦ
							ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Номенклатура
						КОНЕЦ
				ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Номенклатура
			КОНЕЦ КАК Номенклатура,
			ВТ_Рост.ЗначениеСвойства КАК Рост,
			ТаблицаПерсональнойПотребности.КоличествоОстаток КАК План,
			ВЫБОР
				КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
					ТОГДА ВЫБОР
							КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
								ТОГДА ВЫБОР
										КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
											ТОГДА ВЫБОР
													КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
														ТОГДА ВЫБОР
																КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
																	ТОГДА ВЫБОР
																			КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
																				ТОГДА ВЫБОР
																						КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																							ТОГДА ВЫБОР
																									КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																										ТОГДА 0
																									ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
																								КОНЕЦ
																						ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Приоритет
																					КОНЕЦ
																			ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Приоритет
																		КОНЕЦ
																ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Приоритет
															КОНЕЦ
													ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
												КОНЕЦ
										ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Приоритет
									КОНЕЦ
							ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Приоритет
						КОНЕЦ
				ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Приоритет
			КОНЕЦ КАК Приоритет,
			ТаблицаПерсональнойПотребности.ПериодМесяц КАК ПериодМесяц
		ИЗ
			ТаблицаПерсональнойПотребности КАК ТаблицаПерсональнойПотребности
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_АнтропометрияСотрудников КАК ВТ_АнтропометрияСотрудников
				ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_АнтропометрияСотрудников.Сотрудник
					И ТаблицаПерсональнойПотребности.НоменклатураНормы.ВидАнтропометрическогоСвойства = ВТ_АнтропометрияСотрудников.ВидСвойства
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность КАК ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность
				ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность._Сотрудник
					И ТаблицаПерсональнойПотребности.Подразделение = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность._Подразделение
					И ТаблицаПерсональнойПотребности.Должность = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность._Должность
					И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.НоменклатураНормыОрганизации
					И (ВЫБОР
						КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
							ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Пол
						ИНАЧЕ ИСТИНА
					КОНЕЦ)
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность КАК ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность
				ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность._Сотрудник
					И ТаблицаПерсональнойПотребности.Должность = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность._Должность
					И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации
					И (ВЫБОР
						КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
							ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Пол
						ИНАЧЕ ИСТИНА
					КОНЕЦ)
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность КАК ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность
				ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Сотрудник
					И ТаблицаПерсональнойПотребности.Подразделение = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность._Подразделение
					И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации
					И (ВЫБОР
						КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
							ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Пол
						ИНАЧЕ ИСТИНА
					КОНЕЦ)
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность КАК ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность
				ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность._Сотрудник
					И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации
					И (ВЫБОР
						КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
							ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Пол
						ИНАЧЕ ИСТИНА
					КОНЕЦ)
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность КАК ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность
				ПО ТаблицаПерсональнойПотребности.Подразделение = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность._Подразделение
					И ТаблицаПерсональнойПотребности.Должность = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность._Должность
					И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.НоменклатураНормыОрганизации
					И (ВЫБОР
						КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
							ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Пол
						ИНАЧЕ ИСТИНА
					КОНЕЦ)
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность КАК ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность
				ПО ТаблицаПерсональнойПотребности.Должность = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность._Должность
					И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.НоменклатураНормыОрганизации
					И (ВЫБОР
						КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
							ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Пол
						ИНАЧЕ ИСТИНА
					КОНЕЦ)
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность КАК ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность
				ПО ТаблицаПерсональнойПотребности.Подразделение = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность._Подразделение
					И ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.НоменклатураНормыОрганизации
					И (ВЫБОР
						КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
							ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Пол
						ИНАЧЕ ИСТИНА
					КОНЕЦ)
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность КАК ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность
				ПО ТаблицаПерсональнойПотребности.НоменклатураНормы = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.НоменклатураНормыОрганизации
					И (ВЫБОР
						КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Пол &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПолФизическогоЛица.ПустаяСсылка)
							ТОГДА ТаблицаПерсональнойПотребности.Пол = ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Пол
						ИНАЧЕ ИСТИНА
					КОНЕЦ)
				ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Рост КАК ВТ_Рост
				ПО ТаблицаПерсональнойПотребности.Сотрудник = ВТ_Рост.Сотрудник
		ГДЕ
			(ТаблицаПерсональнойПотребности.Подразделение В (&amp;Подразделение)
					ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка))
		
		СГРУППИРОВАТЬ ПО
			ТаблицаПерсональнойПотребности.Организация,
			ТаблицаПерсональнойПотребности.Подразделение,
			ТаблицаПерсональнойПотребности.Сотрудник,
			ТаблицаПерсональнойПотребности.НормаВыдачи,
			ТаблицаПерсональнойПотребности.НоменклатураНормы,
			ВЫБОР
				КОГДА ВТ_АнтропометрияСотрудников.ВидСвойства ЕСТЬ NULL
					ТОГДА ТаблицаПерсональнойПотребности.НоменклатураНормы.ВидАнтропометрическогоСвойства
				ИНАЧЕ ВТ_АнтропометрияСотрудников.ВидСвойства
			КОНЕЦ,
			ТаблицаПерсональнойПотребности.Должность,
			ТаблицаПерсональнойПотребности.РабочееМесто,
			ТаблицаПерсональнойПотребности.ПериодМесяц,
			ЕСТЬNULL(ВТ_АнтропометрияСотрудников.ЗначениеСвойства, ""),
			ВТ_Рост.ЗначениеСвойства,
			ТаблицаПерсональнойПотребности.КоличествоОстаток,
			ВЫБОР
				КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
					ТОГДА ВЫБОР
							КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
								ТОГДА ВЫБОР
										КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
											ТОГДА ВЫБОР
													КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
														ТОГДА ВЫБОР
																КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
																	ТОГДА ВЫБОР
																			КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
																				ТОГДА ВЫБОР
																						КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																							ТОГДА ВЫБОР
																									КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																										ТОГДА 0
																									ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
																								КОНЕЦ
																						ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Приоритет
																					КОНЕЦ
																			ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Приоритет
																		КОНЕЦ
																ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Приоритет
															КОНЕЦ
													ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Приоритет
												КОНЕЦ
										ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Приоритет
									КОНЕЦ
							ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Приоритет
						КОНЕЦ
				ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Приоритет
			КОНЕЦ,
			ВЫБОР
				КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
					ТОГДА ВЫБОР
							КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
								ТОГДА ВЫБОР
										КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
											ТОГДА ВЫБОР
													КОГДА ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
														ТОГДА ВЫБОР
																КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Номенклатура ЕСТЬ NULL
																	ТОГДА ВЫБОР
																			КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Номенклатура ЕСТЬ NULL
																				ТОГДА ВЫБОР
																						КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																							ТОГДА ВЫБОР
																									КОГДА ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура ЕСТЬ NULL
																										ТОГДА ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
																									ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура
																								КОНЕЦ
																						ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_ПустаяДолжность.Номенклатура
																					КОНЕЦ
																			ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_ПустоеПодразделение_Должность.Номенклатура
																		КОНЕЦ
																ИНАЧЕ ВТ_ИтоговыйМаппинг_ПустойСотрудник_Подразделение_Должность.Номенклатура
															КОНЕЦ
													ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_ПустаяДолжность.Номенклатура
												КОНЕЦ
										ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_ПустаяДолжность.Номенклатура
									КОНЕЦ
							ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_ПустоеПодразделение_Должность.Номенклатура
						КОНЕЦ
				ИНАЧЕ ВТ_ИтоговыйМаппинг_Сотрудник_Подразделение_Должность.Номенклатура
			КОНЕЦ) КАК ВложенныйЗапрос1
		ПО ВложенныйЗапрос.Организация = ВложенныйЗапрос1.Организация
			И ВложенныйЗапрос.Подразделение = ВложенныйЗапрос1.Подразделение
			И ВложенныйЗапрос.Должность = ВложенныйЗапрос1.Должность
			И ВложенныйЗапрос.РабочееМесто = ВложенныйЗапрос1.РабочееМесто
			И ВложенныйЗапрос.Сотрудник = ВложенныйЗапрос1.Сотрудник
			И ВложенныйЗапрос.НормаВыдачи = ВложенныйЗапрос1.НормаВыдачи
			И ВложенныйЗапрос.НоменклатураНормы = ВложенныйЗапрос1.НоменклатураНормы
			И ВложенныйЗапрос.ВидАнтропометрии = ВложенныйЗапрос1.ВидАнтропометрии
			И ВложенныйЗапрос.ЗначениеАнтропометрии = ВложенныйЗапрос1.ЗначениеАнтропометрии
			И ВложенныйЗапрос.Рост = ВложенныйЗапрос1.Рост
			И ВложенныйЗапрос.Приоритет = ВложенныйЗапрос1.Приоритет
			И ВложенныйЗапрос.ПериодМесяц = ВложенныйЗапрос1.ПериодМесяц
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Результат.Организация КАК Организация,
	ВТ_Результат.Подразделение КАК Подразделение,
	ВТ_Результат.Должность КАК Должность,
	ВТ_Результат.РабочееМесто КАК РабочееМесто,
	ВТ_Результат.Сотрудник КАК Сотрудник,
	ВТ_Результат.НормаВыдачи КАК НормаВыдачи,
	ВТ_Результат.НоменклатураНормы КАК НоменклатураНормы,
	ВЫБОР
		КОГДА ВТ_Результат.Номенклатура.ИспользоватьРост
			ТОГДА ЕСТЬNULL(ВложенныйЗапрос.Метрика, ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка))
		ИНАЧЕ ЕСТЬNULL(ВложенныйЗапрос1.Метрика, ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка))
	КОНЕЦ КАК Метрика,
	ВТ_Результат.План КАК План,
	ВТ_Результат.ПериодМесяц КАК ПериодМесяц,
	ВТ_Результат.Номенклатура КАК Номенклатура
ПОМЕСТИТЬ ВТ_План
ИЗ
	ВТ_Результат КАК ВТ_Результат
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			СоответствияХарактеристикНоменклатуры.Размер КАК Размер,
			ХарактеристикиНоменклатуры.Владелец КАК Владелец,
			СоответствияХарактеристикНоменклатуры.Рост КАК Рост,
			ХарактеристикиНоменклатуры.Метрика КАК Метрика
		ИЗ
			РегистрСведений.СоответствияХарактеристикНоменклатуры КАК СоответствияХарактеристикНоменклатуры
				ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
				ПО СоответствияХарактеристикНоменклатуры.Метрика = ХарактеристикиНоменклатуры.Метрика
		
		СГРУППИРОВАТЬ ПО
			ХарактеристикиНоменклатуры.Владелец,
			СоответствияХарактеристикНоменклатуры.Размер,
			СоответствияХарактеристикНоменклатуры.Рост,
			ХарактеристикиНоменклатуры.Метрика) КАК ВложенныйЗапрос
		ПО ВТ_Результат.ЗначениеАнтропометрии = ВложенныйЗапрос.Размер
			И ВТ_Результат.Номенклатура = ВложенныйЗапрос.Владелец
			И ВТ_Результат.Рост = ВложенныйЗапрос.Рост
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			СоответствияХарактеристикНоменклатуры.Размер КАК Размер,
			ХарактеристикиНоменклатуры.Владелец КАК Владелец,
			ХарактеристикиНоменклатуры.Метрика КАК Метрика
		ИЗ
			РегистрСведений.СоответствияХарактеристикНоменклатуры КАК СоответствияХарактеристикНоменклатуры
				ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
				ПО СоответствияХарактеристикНоменклатуры.Метрика = ХарактеристикиНоменклатуры.Метрика
		
		СГРУППИРОВАТЬ ПО
			ХарактеристикиНоменклатуры.Владелец,
			СоответствияХарактеристикНоменклатуры.Размер,
			ХарактеристикиНоменклатуры.Метрика) КАК ВложенныйЗапрос1
		ПО ВТ_Результат.ЗначениеАнтропометрии = ВложенныйЗапрос1.Размер
			И ВТ_Результат.Номенклатура = ВложенныйЗапрос1.Владелец
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СУММА(ВыданныеСредстваЗащитыОбороты.КоличествоПриход) КАК Факт,
	ВыданныеСредстваЗащитыОбороты.Организация КАК Организация,
	ВыданныеСредстваЗащитыОбороты.Сотрудник КАК Сотрудник,
	ВыданныеСредстваЗащитыОбороты.НормаВыдачи КАК НормаВыдачи,
	ВыданныеСредстваЗащитыОбороты.НоменклатураНормы КАК НоменклатураНормы,
	ВыданныеСредстваЗащитыОбороты.Номенклатура КАК Номенклатура,
	НАЧАЛОПЕРИОДА(ВыданныеСредстваЗащитыОбороты.ДатаВыдачи, МЕСЯЦ) КАК ПериодМесяц,
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Подразделение КАК Подразделение,
	ЕСТЬNULL(ВыданныеСредстваЗащитыОбороты.ХарактеристикаНоменклатуры.Метрика, ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка)) КАК ХарактеристикаФ,
	АВТОНОМЕРЗАПИСИ() КАК Номер
ПОМЕСТИТЬ ВтФакт
ИЗ
	РегистрНакопления.ВыданныеСредстваЗащиты.Обороты(
			&amp;НаДату,
			&amp;ДатаК,
			,
			Организация = &amp;Организация
				И (ДатаВыдачи МЕЖДУ &amp;НаДату И &amp;ДатаК)
				И (НоменклатураНормы = &amp;Норма
					ИЛИ &amp;Норма = ЗНАЧЕНИЕ(Справочник.НоменклатураНормОрганизации.ПУстаяСсылка))
				И (Номенклатура = &amp;Номенклатура
					ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПУстаяСсылка))) КАК ВыданныеСредстваЗащитыОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ОсновноеМестоРаботыСотрудника.СрезПоследних(
				,
				Организация = &amp;Организация
					И (Подразделение В (&amp;Подразделение)
						ИЛИ &amp;Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПУстаяСсылка))) КАК ОсновноеМестоРаботыСотрудникаСрезПоследних
		ПО ВыданныеСредстваЗащитыОбороты.Сотрудник = ОсновноеМестоРаботыСотрудникаСрезПоследних.Сотрудник
			И (ОсновноеМестоРаботыСотрудникаСрезПоследних.ОсновноеМестоРаботы = ИСТИНА)

СГРУППИРОВАТЬ ПО
	НАЧАЛОПЕРИОДА(ВыданныеСредстваЗащитыОбороты.ДатаВыдачи, МЕСЯЦ),
	ВыданныеСредстваЗащитыОбороты.Организация,
	ВыданныеСредстваЗащитыОбороты.Сотрудник,
	ВыданныеСредстваЗащитыОбороты.НормаВыдачи,
	ВыданныеСредстваЗащитыОбороты.НоменклатураНормы,
	ВыданныеСредстваЗащитыОбороты.Номенклатура,
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Подразделение,
	ЕСТЬNULL(ВыданныеСредстваЗащитыОбороты.ХарактеристикаНоменклатуры.Метрика, ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка))
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_План.Организация КАК Организация,
	ВТ_План.Подразделение КАК Подразделение,
	ВТ_План.Должность КАК Должность,
	ВТ_План.РабочееМесто КАК РабочееМесто,
	ВТ_План.Сотрудник КАК Сотрудник,
	ВТ_План.НормаВыдачи КАК НормаВыдачи,
	ВТ_План.НоменклатураНормы КАК НоменклатураНормы,
	ВТ_План.Метрика КАК Метрика,
	ВТ_План.План КАК План,
	ВТ_План.ПериодМесяц КАК ПериодМесяц,
	ВТ_План.Номенклатура КАК Номенклатура,
	ЕСТЬNULL(ВтФакт.ХарактеристикаФ, ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка)) КАК ХарактеристикаФ,
	ЕСТЬNULL(ВтФакт.Номенклатура, ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)) КАК НоменклатураФ,
	ЕСТЬNULL(ВтФакт.Факт, 0) КАК Факт,
	ЕСТЬNULL(ВтФакт.Номер, 0) КАК Номер
ПОМЕСТИТЬ ВТ_ПлаН_Лев_Факт
ИЗ
	ВТ_План КАК ВТ_План
		ЛЕВОЕ СОЕДИНЕНИЕ ВтФакт КАК ВтФакт
		ПО ВТ_План.Организация = ВтФакт.Организация
			И ВТ_План.Подразделение = ВтФакт.Подразделение
			И ВТ_План.НормаВыдачи = ВтФакт.НормаВыдачи
			И ВТ_План.НоменклатураНормы = ВтФакт.НоменклатураНормы
			И ВТ_План.Сотрудник = ВтФакт.Сотрудник
			И ВТ_План.ПериодМесяц = ВтФакт.ПериодМесяц
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ПлаН_Лев_Факт.Организация КАК Организация,
	ВТ_ПлаН_Лев_Факт.Подразделение КАК Подразделение,
	ВТ_ПлаН_Лев_Факт.Сотрудник КАК Сотрудник,
	ВТ_ПлаН_Лев_Факт.НормаВыдачи КАК НормаВыдачи,
	ВТ_ПлаН_Лев_Факт.НоменклатураНормы КАК НоменклатураНормы,
	ВТ_ПлаН_Лев_Факт.План КАК План,
	ВТ_ПлаН_Лев_Факт.ПериодМесяц КАК ПериодМесяц,
	ВТ_ПлаН_Лев_Факт.Метрика КАК Характеристика,
	ВТ_ПлаН_Лев_Факт.Номенклатура КАК Номенклатура,
	ВТ_ПлаН_Лев_Факт.Факт КАК Факт,
	ВЫБОР
		КОГДА ВТ_ПлаН_Лев_Факт.НоменклатураФ = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
			ТОГДА ЕСТЬNULL(ВложенныйЗапрос.Номенклатура, ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка))
		ИНАЧЕ ВТ_ПлаН_Лев_Факт.НоменклатураФ
	КОНЕЦ КАК НоменклатураФ,
	ВЫБОР
		КОГДА ВТ_ПлаН_Лев_Факт.ХарактеристикаФ = ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка)
			ТОГДА ЕСТЬNULL(ВложенныйЗапрос.ХарактеристикаФ, ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка))
		ИНАЧЕ ВТ_ПлаН_Лев_Факт.ХарактеристикаФ
	КОНЕЦ КАК ХарактеристикаФ,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВложенныйЗапрос.Номер, 0) = 0
			ТОГДА ВТ_ПлаН_Лев_Факт.Номер
		ИНАЧЕ ЕСТЬNULL(ВложенныйЗапрос.Номер, 0)
	КОНЕЦ КАК Номер
ПОМЕСТИТЬ Вт_ПредИтог
ИЗ
	ВТ_ПлаН_Лев_Факт КАК ВТ_ПлаН_Лев_Факт
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ВтФакт.Факт КАК Факт,
			ВтФакт.Организация КАК Организация,
			ВтФакт.Сотрудник КАК Сотрудник,
			ВтФакт.НормаВыдачи КАК НормаВыдачи,
			ВтФакт.НоменклатураНормы КАК НоменклатураНормы,
			ВтФакт.Номенклатура КАК Номенклатура,
			ВтФакт.Подразделение КАК Подразделение,
			ВтФакт.ХарактеристикаФ КАК ХарактеристикаФ,
			ВтФакт.Номер КАК Номер,
			ВтФакт.ПериодМесяц КАК ПериодМесяц
		ИЗ
			ВтФакт КАК ВтФакт
		ГДЕ
			НЕ ВтФакт.Номер В
						(ВЫБРАТЬ
							ВТ_ПлаН_Лев_Факт.Номер
						ИЗ
							ВТ_ПлаН_Лев_Факт КАК ВТ_ПлаН_Лев_Факт)) КАК ВложенныйЗапрос
		ПО ВТ_ПлаН_Лев_Факт.Организация = ВложенныйЗапрос.Организация
			И ВТ_ПлаН_Лев_Факт.Подразделение = ВложенныйЗапрос.Подразделение
			И ВТ_ПлаН_Лев_Факт.Сотрудник = ВложенныйЗапрос.Сотрудник
			И ВТ_ПлаН_Лев_Факт.НормаВыдачи = ВложенныйЗапрос.НормаВыдачи
			И ВТ_ПлаН_Лев_Факт.НоменклатураНормы = ВложенныйЗапрос.НоменклатураНормы
			И ВТ_ПлаН_Лев_Факт.ПериодМесяц = ВложенныйЗапрос.ПериодМесяц

СГРУППИРОВАТЬ ПО
	ВТ_ПлаН_Лев_Факт.Организация,
	ВТ_ПлаН_Лев_Факт.Подразделение,
	ВТ_ПлаН_Лев_Факт.Сотрудник,
	ВТ_ПлаН_Лев_Факт.НормаВыдачи,
	ВТ_ПлаН_Лев_Факт.НоменклатураНормы,
	ВТ_ПлаН_Лев_Факт.Метрика,
	ВТ_ПлаН_Лев_Факт.План,
	ВТ_ПлаН_Лев_Факт.ПериодМесяц,
	ВТ_ПлаН_Лев_Факт.Номенклатура,
	ВТ_ПлаН_Лев_Факт.Факт,
	ВЫБОР
		КОГДА ВТ_ПлаН_Лев_Факт.ХарактеристикаФ = ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка)
			ТОГДА ЕСТЬNULL(ВложенныйЗапрос.ХарактеристикаФ, ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка))
		ИНАЧЕ ВТ_ПлаН_Лев_Факт.ХарактеристикаФ
	КОНЕЦ,
	ВЫБОР
		КОГДА ВТ_ПлаН_Лев_Факт.НоменклатураФ = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
			ТОГДА ЕСТЬNULL(ВложенныйЗапрос.Номенклатура, ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка))
		ИНАЧЕ ВТ_ПлаН_Лев_Факт.НоменклатураФ
	КОНЕЦ,
	ВЫБОР
		КОГДА ЕСТЬNULL(ВложенныйЗапрос.Номер, 0) = 0
			ТОГДА ВТ_ПлаН_Лев_Факт.Номер
		ИНАЧЕ ЕСТЬNULL(ВложенныйЗапрос.Номер, 0)
	КОНЕЦ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	Вт_ПредИтог.Организация КАК Организация,
	Вт_ПредИтог.Подразделение КАК Подразделение,
	Вт_ПредИтог.Сотрудник КАК Сотрудник,
	Вт_ПредИтог.НормаВыдачи КАК НормаВыдачи,
	Вт_ПредИтог.НоменклатураНормы КАК НоменклатураНормы,
	Вт_ПредИтог.План КАК План,
	Вт_ПредИтог.ПериодМесяц КАК ПериодМесяц,
	Вт_ПредИтог.Характеристика КАК Характеристика,
	Вт_ПредИтог.Номенклатура КАК Номенклатура,
	Вт_ПредИтог.Факт КАК Факт,
	Вт_ПредИтог.НоменклатураФ КАК НоменклатураФ,
	Вт_ПредИтог.ХарактеристикаФ КАК ХарактеристикаФ
ПОМЕСТИТЬ Вт_Итог
ИЗ
	Вт_ПредИтог КАК Вт_ПредИтог

СГРУППИРОВАТЬ ПО
	Вт_ПредИтог.Организация,
	Вт_ПредИтог.Подразделение,
	Вт_ПредИтог.Сотрудник,
	Вт_ПредИтог.НормаВыдачи,
	Вт_ПредИтог.НоменклатураНормы,
	Вт_ПредИтог.ПериодМесяц,
	Вт_ПредИтог.План,
	Вт_ПредИтог.Номенклатура,
	Вт_ПредИтог.Факт,
	Вт_ПредИтог.НоменклатураФ,
	Вт_ПредИтог.ХарактеристикаФ,
	Вт_ПредИтог.Характеристика

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВтФакт.Организация,
	ВтФакт.Подразделение,
	ВтФакт.Сотрудник,
	ВтФакт.НормаВыдачи,
	ВтФакт.НоменклатураНормы,
	СУММА(0),
	ВтФакт.ПериодМесяц,
	ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка),
	ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка),
	СУММА(ЕСТЬNULL(ВтФакт.Факт, 0)),
	ЕСТЬNULL(ВтФакт.Номенклатура, ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)),
	ЕСТЬNULL(ВтФакт.ХарактеристикаФ, ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка))
ИЗ
	ВтФакт КАК ВтФакт
ГДЕ
	НЕ ВтФакт.Номер В
				(ВЫБРАТЬ
					ВТ_ПредИтог.Номер
				ИЗ
					ВТ_ПредИтог КАК ВТ_ПредИтог)

СГРУППИРОВАТЬ ПО
	ВтФакт.Организация,
	ВтФакт.Сотрудник,
	ВтФакт.НормаВыдачи,
	ВтФакт.НоменклатураНормы,
	ВтФакт.ПериодМесяц,
	ВтФакт.Подразделение,
	ЕСТЬNULL(ВтФакт.ХарактеристикаФ, ЗНАЧЕНИЕ(Справочник.Метрики.ПустаяСсылка)),
	ЕСТЬNULL(ВтФакт.Номенклатура, ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка))
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	Вт_Итог.Сотрудник КАК Сотрудник,
	Вт_Итог.НоменклатураНормы КАК НоменклатураНормы,
	Вт_Итог.НормаВыдачи КАК НормаВыдачи,
	СУММА(Вт_Итог.План) КАК План,
	Вт_Итог.ПериодМесяц КАК ПериодМесяц,
	Вт_Итог.Номенклатура КАК Номенклатура,
	Вт_Итог.Характеристика КАК ХарактеристикаП,
	СУММА(Вт_Итог.Факт) КАК Факт,
	Вт_Итог.ХарактеристикаФ КАК ХарактеристикаФ,
	Вт_Итог.НоменклатураФ КАК НоменклатураФ
ПОМЕСТИТЬ ВТ_ИТогГруппировка
ИЗ
	Вт_Итог КАК Вт_Итог
ГДЕ
	(Вт_Итог.Номенклатура = &amp;Номенклатура
			ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
			ИЛИ (Вт_Итог.НоменклатураФ = &amp;Номенклатура
				ИЛИ &amp;Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)))

СГРУППИРОВАТЬ ПО
	Вт_Итог.Сотрудник,
	Вт_Итог.ПериодМесяц,
	Вт_Итог.НормаВыдачи,
	Вт_Итог.НоменклатураНормы,
	Вт_Итог.Характеристика,
	Вт_Итог.Номенклатура,
	Вт_Итог.ХарактеристикаФ,
	Вт_Итог.НоменклатураФ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	МВЗСотрудников.Сотрудник КАК Сотрудник,
	МВЗСотрудников.МВЗ КАК МВЗ
ПОМЕСТИТЬ ВТ_МВЗСотрудников
ИЗ
	РегистрСведений.МВЗСотрудников КАК МВЗСотрудников
ГДЕ
	МВЗСотрудников.Организация = &amp;Организация
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Организация КАК Организация,
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Сотрудник КАК Сотрудник,
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Подразделение КАК Подразделение,
	ОсновноеМестоРаботыСотрудникаСрезПоследних.Должность КАК Должность
ПОМЕСТИТЬ ВТ_ОсновноеМестоРаботыСотрудника_ДляМВЗ
ИЗ
	РегистрСведений.ОсновноеМестоРаботыСотрудника.СрезПоследних(&amp;НаДату, Организация = &amp;Организация) КАК ОсновноеМестоРаботыСотрудникаСрезПоследних
ГДЕ
	ОсновноеМестоРаботыСотрудникаСрезПоследних.ОсновноеМестоРаботы
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	МВЗПодразделенийСрезПоследних.Подразделение КАК Подразделение,
	МВЗПодразделенийСрезПоследних.МВЗ КАК МВЗ
ПОМЕСТИТЬ ВТ_МВЗПодразделений
ИЗ
	РегистрСведений.МВЗПодразделений.СрезПоследних(&amp;НаДату, Подразделение.Владелец = &amp;Организация) КАК МВЗПодразделенийСрезПоследних
ГДЕ
	МВЗПодразделенийСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	МВЗДолжностейСрезПоследних.Организация КАК Организация,
	МВЗДолжностейСрезПоследних.Должность КАК Должность,
	МВЗДолжностейСрезПоследних.МВЗ КАК МВЗ
ПОМЕСТИТЬ ВТ_МВЗДолжностей
ИЗ
	РегистрСведений.МВЗДолжностей.СрезПоследних(&amp;НаДату, Организация = &amp;Организация) КАК МВЗДолжностейСрезПоследних
ГДЕ
	МВЗДолжностейСрезПоследних.Использовать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ОсновноеМестоРаботыСотрудника_ДляМВЗ.Сотрудник КАК Сотрудник,
	МАКСИМУМ(ВЫБОР
			КОГДА ВТ_МВЗСотрудников.МВЗ ЕСТЬ NULL
				ТОГДА ВЫБОР
						КОГДА ВТ_МВЗПодразделений.МВЗ ЕСТЬ NULL
							ТОГДА ВЫБОР
									КОГДА ВТ_МВЗДолжностей.МВЗ ЕСТЬ NULL
										ТОГДА ЗНАЧЕНИЕ(Справочник.МВЗ.ПустаяСсылка)
									ИНАЧЕ ВТ_МВЗДолжностей.МВЗ
								КОНЕЦ
						ИНАЧЕ ВТ_МВЗПодразделений.МВЗ
					КОНЕЦ
			ИНАЧЕ ВТ_МВЗСотрудников.МВЗ
		КОНЕЦ) КАК МВЗ
ПОМЕСТИТЬ ВТ_МВЗ
ИЗ
	ВТ_ОсновноеМестоРаботыСотрудника_ДляМВЗ КАК ВТ_ОсновноеМестоРаботыСотрудника_ДляМВЗ
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_МВЗСотрудников КАК ВТ_МВЗСотрудников
		ПО ВТ_ОсновноеМестоРаботыСотрудника_ДляМВЗ.Сотрудник = ВТ_МВЗСотрудников.Сотрудник
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_МВЗПодразделений КАК ВТ_МВЗПодразделений
		ПО ВТ_ОсновноеМестоРаботыСотрудника_ДляМВЗ.Подразделение = ВТ_МВЗПодразделений.Подразделение
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_МВЗДолжностей КАК ВТ_МВЗДолжностей
		ПО ВТ_ОсновноеМестоРаботыСотрудника_ДляМВЗ.Организация = ВТ_МВЗДолжностей.Организация
			И ВТ_ОсновноеМестоРаботыСотрудника_ДляМВЗ.Должность = ВТ_МВЗДолжностей.Должность

СГРУППИРОВАТЬ ПО
	ВТ_ОсновноеМестоРаботыСотрудника_ДляМВЗ.Сотрудник
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ИТогГруппировка.Сотрудник КАК Сотрудник,
	ВТ_ИТогГруппировка.НормаВыдачи КАК НормаВыдачи,
	ВТ_ИТогГруппировка.НоменклатураНормы КАК НоменклатураНормы,
	ВТ_ИТогГруппировка.План КАК Потребность,
	ВТ_ИТогГруппировка.ПериодМесяц КАК ПериодМесяц,
	ВЫБОР
		КОГДА ВТ_ИТогГруппировка.НоменклатураФ = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)
			ТОГДА ВТ_ИТогГруппировка.Номенклатура
		ИНАЧЕ ВТ_ИТогГруппировка.НоменклатураФ
	КОНЕЦ КАК Номенклатура,
	ВТ_ИТогГруппировка.ХарактеристикаП КАК ХарактеристикаП,
	ВТ_ИТогГруппировка.Факт КАК Выдано,
	ВТ_ИТогГруппировка.ХарактеристикаФ КАК ХарактеристикаФ,
	ВЫБОР
		КОГДА ВТ_ИТогГруппировка.Номенклатура = ВТ_ИТогГруппировка.НоменклатураФ
				И ВТ_ИТогГруппировка.ХарактеристикаП = ВТ_ИТогГруппировка.ХарактеристикаФ
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК Совпадает,
	ВТ_ИТогГруппировка.НоменклатураФ КАК НоменклатураФ,
	ЕСТЬNULL(ВТ_ОсновноеМестоРаботыСотрудника.Подразделение, ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)) КАК Подразделение,
	ЕСТЬNULL(ВТ_ОсновноеМестоРаботыСотрудника.Должность, ЗНАЧЕНИЕ(Справочник.ДолжностиИПрофессии.ПустаяСсылка)) КАК Должность,
	ВТ_МВЗ.МВЗ КАК МВЗ
ИЗ
	ВТ_ИТогГруппировка КАК ВТ_ИТогГруппировка
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ОсновноеМестоРаботыСотрудника КАК ВТ_ОсновноеМестоРаботыСотрудника
		ПО ВТ_ИТогГруппировка.Сотрудник = ВТ_ОсновноеМестоРаботыСотрудника.Сотрудник
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_МВЗ КАК ВТ_МВЗ
		ПО ВТ_ИТогГруппировка.Сотрудник = ВТ_МВЗ.Сотрудник

УПОРЯДОЧИТЬ ПО
	Сотрудник</query>
	</dataSet>
	<totalField>
		<dataPath>Потребность</dataPath>
		<expression>Сумма(Потребность)</expression>
	</totalField>
	<totalField>
		<dataPath>Выдано</dataPath>
		<expression>Сумма(Выдано)</expression>
	</totalField>
	<parameter>
		<name>НаДату</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>На дату</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Организация</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Организация</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Организации</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Подразделение</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Подразделение</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Подразделения</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ДатаК</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата К</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Норма</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Норма</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Номенклатура</v8:Type>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.НоменклатураНормОрганизации</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Номенклатура</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Номенклатура</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Номенклатура</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>ОтчетПоОбеспеченности</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Отчет по обеспеченности</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПериодМесяц</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Потребность</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Выдано</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:use>false</dcsset:use>
					<dcsset:selection/>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">Совпадает</dcsset:left>
							<dcsset:comparisonType>Equal</dcsset:comparisonType>
							<dcsset:right xsi:type="xs:boolean">false</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">#FFC06F</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МакетОформления</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">Зеленый</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemChart">
				<dcsset:point>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ПериодМесяц</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:point>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:column>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ПериодМесяц</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:column>
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Сотрудник</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Подразделение</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Должность</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>НормаВыдачи</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Номенклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>МВЗ</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:row>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>