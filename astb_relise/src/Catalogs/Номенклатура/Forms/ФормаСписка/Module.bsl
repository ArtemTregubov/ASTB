
&НаКлиенте
Процедура ИерархияПриАктивизацииСтроки(Элемент)
	
	Если ЭтаФорма.Элементы.Иерархия.ТекущаяСтрока = Неопределено Тогда
		ТекущаяИерархия = ПредопределенноеЗначение("Справочник.Номенклатура.ПустаяСсылка");
		ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбора(ЭтаФорма.Список.Отбор, "Родитель", ТекущаяИерархия,ВидСравненияКомпоновкиДанных.Равно, "Родитель", Истина);
	Иначе
		Если ЗначениеЗаполнено(ЭтаФорма.Элементы.Иерархия.ТекущаяСтрока) Тогда
			ТекущаяИерархия = ЭтаФорма.Элементы.Иерархия.ТекущаяСтрока;
			ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбора(ЭтаФорма.Список.Отбор, "Родитель", ТекущаяИерархия,ВидСравненияКомпоновкиДанных.Равно, "Родитель", Истина);
		Иначе
			ТекущаяИерархия = ПредопределенноеЗначение("Справочник.Номенклатура.ПустаяСсылка");
			ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбора(ЭтаФорма.Список.Отбор, "Родитель", ТекущаяИерархия,ВидСравненияКомпоновкиДанных.Равно, "Родитель", Ложь);
		КонецЕсли;
	КонецЕсли;
	
	ЭтаФорма.ТекущаяИерархия = ТекущаяИерархия; 
	
КонецПроцедуры

&НаКлиенте
Процедура ИзменитьВыделенные(Команда)
	
	ГрупповоеИзменениеОбъектовКлиент.ИзменитьВыделенные(Элементы.Список);
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Настройки = ОбщегоНазначения.ХранилищеОбщихНастроекЗагрузить("Справочник_НоменклатураВыдачи_ФормаСписка","ФормаСписка");
	
	Если Настройки <> Неопределено Тогда
		
		Если ЗначениеЗаполнено(Настройки.ТекущаяИерархия) Тогда
			
			Если Не (Настройки.ТекущаяИерархия.ПолучитьОбъект() = Неопределено) Тогда
				ЭтаФорма.Элементы.Иерархия.ТекущаяСтрока 	= Настройки.ТекущаяИерархия;
				ЭтаФорма.ТекущаяИерархия 					= Настройки.ТекущаяИерархия;
			КонецЕсли;
			
		КонецЕсли;
			
	КонецЕсли;
	
КонецПроцедуры

